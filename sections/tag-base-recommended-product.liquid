{% schema %}
{
  "name": "Recommended products",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Recommended products"
    },
    {
      "type": "text",
      "id": "related_tag",
      "label": "Tag",
      "info" : "The tag determines which products show as related products."
    },
    {
      "type": "select",
      "id": "number_of_products",
      "label": "Number of products to show",
      "default": "4",
      "options": [
        {
          "value": "4",
          "label": "4"
        },
        {
          "value": "8",
          "label": "8"
        },
        {
          "value": "12",
          "label": "12"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Recommended products"
    }
  ]
}
{% endschema %}

{% comment %}
    This code section displays 4 related products based on the vendor, collection,
    and a custom metafield condition.
{% endcomment %}

{% assign current_vendor = product.vendor %}
{% assign current_collection = product.collections.first %}
{% assign custom_metafield_condition = product.metafields.custom.sub_category_1 %}

{% assign related_products =custom_metafield_condition %}

{% for related_product in related_products limit: 4 %}
  <div class="related-product">
    <h3>{{ related_product.title }}</h3>
    <!-- Add other product details as needed -->
  </div>
{% endfor %}