<style>
    .product-card {
      box-sizing: border-box;
      float: left;
      min-height: 1em;
      padding-left: 2em;
      vertical-align: top;
      width: 25%;
    }
  
    .visuallyhidden {
      border: 0;
      clip: rect(0 0 0 0);
      height: 1px;
      margin: -1px;
      overflow: hidden;
      padding: 0;
      position: absolute;
      width: 1px;
      white-space: nowrap;
    }
  </style>
  <h3>recommend product</h3>
  {% assign current_vendor = product.vendor %}
  {% assign related_products = all_products | where: 'vendor', current_vendor %}
  
  {% if related_products.size >= 3 %}
    {% for related_product in related_products limit: 3 %}
      <div class="related-product">
        <h3>{{ related_product.title }}</h3>
        <!-- Add other product details as needed -->
      </div>
    {% endfor %}
  {% else %}
    {% comment %}
      Display products based on custom metafield condition when
      the number of products from the same vendor is less than 3.
    {% endcomment %}
    {% assign custom_metafield_condition = product.metafields.custom.sub_category_1 %}
    {% assign custom_metafield_products = all_products | where: custom_metafield_condition %}
    
    {% for custom_metafield_product in custom_metafield_products limit: 3 %}
      <div class="related-product">
        <h3>{{ custom_metafield_product.title }}</h3>
        <!-- Add other product details as needed -->
      </div>
    {% endfor %}
  {% endif %}


{% comment %} {% assign vendor = product.metafields.custom.collection_name %}
{% assign product_handle = product.handle %}
handel is {{ product.metafields.custom.collection_name }}
{% assign counter = '' %}
<div class"grid grid--uniform grid--view-items">
{% for product in collections['all'].all_products %}
 {% if vendor == product.metafields.custom.collection_name and counter.size < 30 and product_handle != product.handle %}
 {% capture temp %}{{ counter }}*{% endcapture %}
 {% assign counter = temp %}
 <div style="float:left;width:30%;padding:1%;">
 <a href="{{ product.url | within: collection }}" title="{{ product.title }}">
 <img src="{{ product.images.first | product_img_url: 'medium' }}" alt="{{ product.title }}" />
 </a>
 <h3>{{ product.title }}</h3>
 </div>
 {% endif %} 
{% endfor %}
</div>


{% assign vendor = product.vendor %}
{% assign product_handle = product.handle %}
handel is {{ product.vendor }}
{% assign counter = '' %}
<div class"grid grid--uniform grid--view-items">
{% for product in collections['all'].all_products %}
 {% if  vendor == product.vendor | product.metafields.custom.sub_category_1 | counter.size < 4 and product_handle != product.handle %}
 {% capture temp %}{{ counter }}*{% endcapture %}
 {% assign counter = temp %}
 <div style="float:left;width:30%;padding:1%;">
 <a href="{{ product.url | within: collection }}" title="{{ product.title }}">
 <img src="{{ product.images.first | product_img_url: 'medium' }}" alt="{{ product.title }}" />
 </a>
 <h3>{{ product.title }}</h3>
 product vender :{{ product.vendor }}
 product sub category : {{ product.metafields.custom.sub_category_1}}
 <h3>{{ product.price }}</h3>
 </div>
{% endif %}
{% endfor %}
</div> {% endcomment %}







{% comment %}   
  {%- assign related_items = related_items | trim -%}
  {%- unless related_items == blank -%}
    <aside>
      {%- if section.settings.heading -%}
        <h2>{{ section.settings.heading }}</h2>
      {%- endif -%}
  
      {{ related_items }}
    </aside>
  {%- endunless -%} {% endcomment %}
  
  {% schema %}
  {
    "name": "Recommended products",
    "settings": [
      {
        "type": "text",
        "id": "heading",
        "label": "Heading",
        "default": "Recommended products"
      },
      {
        "type": "text",
        "id": "related_tag",
        "label": "Tag",
        "info" : "The tag determines which products show as related products."
      },
      {
        "type": "select",
        "id": "number_of_products",
        "label": "Number of products to show",
        "default": "4",
        "options": [
          {
            "value": "4",
            "label": "4"
          },
          {
            "value": "8",
            "label": "8"
          },
          {
            "value": "12",
            "label": "12"
          }
        ]
      }
    ],
    "presets": [
      {
        "name": "Recommended products"
      }
    ]
  }
  {% endschema %}